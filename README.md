# AnimeCards ‚Äî –∫–∞—Ä—Ç–æ—á–Ω—ã–π –±–æ—Ç –ø–æ –∞–Ω–∏–º–µ ‚úÖ

**AnimeCards** ‚Äî –ø—Ä–æ—Å—Ç–æ–π Telegram-–±–æ—Ç –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –ø–æ –º–æ—Ç–∏–≤–∞–º –∞–Ω–∏–º–µ. –ò–¥–µ–π–Ω—ã–º –≤–¥–æ—Ö–Ω–æ–≤–∏—Ç–µ–ª–µ–º –ø–æ—Å–ª—É–∂–∏–ª –±–æ—Ç **AniCard** (@anicardplaybot), –Ω–æ —É –º–æ–µ–≥–æ –±–æ—Ç–∞ –¥—Ä—É–≥–∞—è, –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è ‚Äî –∑–¥–µ—Å—å –∏–≥—Ä–æ–∫–∏ –ø—Ä–æ—Å—Ç–æ —Å–æ–±–∏—Ä–∞—é—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é –∫–∞—Ä—Ç–æ—á–µ–∫.

**–ë–æ—Ç:** @animcrds_bot

---

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –±–æ—Ç üéØ

- –†–∞–∑–¥–∞—ë—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –•—Ä–∞–Ω–∏—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é SQLite –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç üöÄ

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π `.env` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π):

```dotenv
# –ü—Ä–∏–º–µ—Ä .env
BOT_TOKEN=123456789:ABCDefGhIJKlmNoPqRstUvWxYz
DB_URL=sqlite+aiosqlite:///./database.db
```

- `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ (—Ñ–æ—Ä–º–∞—Ç: `123456789:ABC...`).
- `DB_URL` ‚Äî URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SQLite: `sqlite+aiosqlite:///./database.db`.

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–ª—É—á—à–µ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏):

```bash
pip install -r requirements.txt
# –∏–ª–∏ –ø–æ –∏–º–µ–Ω–∞–º
pip install pydantic pydantic-settings sqlalchemy aiosqlite aiogram python-dotenv loguru
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:

```bash
python main.py
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–æ–∑–¥–∞—Å—Ç—Å—è —Ñ–∞–π–ª `database.db` –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã) üîß

–ù–∏–∂–µ ‚Äî —Å–≤–æ–¥–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª–µ–π (—Å–º. `db/models.py`):

- **users**
  - `id` (BigInteger, PK) ‚Äî id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
  - `yens` (int) ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –≤–∞–ª—é—Ç–∞
  - `pity` (int) ‚Äî —Å—á—ë—Ç—á–∏–∫ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—ã–ø–∞–¥–µ–Ω–∏—è —Ö—Ä–æ–Ω–æ-–∫–∞—Ä—Ç–æ—á–µ–∫ (—Å–∞–º—ã–µ —Ä–µ–¥–∫–∏–µ –≤ –±–æ—Ç–µ)
  - `username` (varchar) ‚Äî –Ω–∏–∫–Ω–µ–π–º
  - `name` (str) ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è
  - `last_open` (datetime) ‚Äî –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è
  - `joined` (datetime) ‚Äî –≤—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
  - `start` (bool) ‚Äî —Ñ–ª–∞–≥ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
  - –û—Ç–Ω–æ—à–µ–Ω–∏—è: `inventory` (many-to-many -> `cards`), `profile` (one-to-one -> `profiles`)

- **cards**
  - `id` (PK, autoincrement)
  - `verse_name` (FK -> `verses.name`)
  - `rarity_name` (FK -> `rarities.name`)
  - `value` (int) ‚Äî —Ü–µ–Ω–Ω–æ—Å—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏
  - `name` (str) ‚Äî –∏–º—è –∫–∞—Ä—Ç–æ—á–∫–∏
  - `icon` (str|null) ‚Äî –ø—É—Ç—å/–∏–º—è –∏–∫–æ–Ω–∫–∏
  - `shiny` (bool) ‚Äî —Ä–µ–¥–∫–∞—è –≤–µ—Ä—Å–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏
  - `can_drop` (bool) ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–ø–∞–¥–µ–Ω–∏—è
  - –û—Ç–Ω–æ—à–µ–Ω–∏—è: `owners` (many-to-many -> `users`), `rarity`, `verse`

- **rarities**
  - `id`, `name` (unique)
  - –°–≤—è–∑—å: `cards`

- **verses**
  - `id`, `name` (unique)
  - –°–≤—è–∑—å: `cards`

- **profiles**
  - `id`, `user_id` (FK -> `users.id`), `describe` (varchar)
  - –û—Ç–Ω–æ—à–µ–Ω–∏–µ: `owner` (User)

- **usercards** (association table)
  - `user_id`, `card_id` ‚Äî –ø–∞—Ä—ã –¥–ª—è many-to-many –º–µ–∂–¥—É `users` –∏ `cards`.

---

## –°–æ–≤–µ—Ç—ã –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ –¥–µ–ø–ª–æ—é üí°

- –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —É–¥–æ–±–Ω–µ–µ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –Ω–∞ SQLite; –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–æ–∫—Ä—É–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgreSQL (–∑–∞–º–µ–Ω–∏—Ç—å `DB_URL` –Ω–∞ `postgresql+asyncpg://user:pass@host:port/dbname`).
- –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö; –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ `.gitignore`.
- –õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ `log.txt` (—É–∫–∞–∑–∞–Ω–æ –≤ `main.py`).
